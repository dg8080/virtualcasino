{% extends 'base.html' %}
{% block content %}
<div class="card text-white bg-dark p-4">
    <div class="col-md-10 offset-md-1 text-center">
        <h2 class="fs-1">Krupier AI (Qwen lokalny)</h2>
        
        <div class="card bg-dark text-white mb-4 border-info shadow">
            <div class="card-body">
                <h5 class="card-title text-info fs-3">Krupier:</h5>
                <img class="card-img-right" src="./static/krupier.png">
                <div class="border border-info rounded">
                    <p class="card-text fst-italic">"{{ ai_comment }}"</p>
                </div>
            </div>
        </div>

        {% if game_result %}
            <div class="alert alert-{% if 'WYGRANA' in game_result or 'Wygrana' in game_result or 'BLACKJACK' in game_result %}success{% elif 'PRZEGRANA' in game_result or 'Przegrana' in game_result or 'FURA!' in game_result or 'Nie udzielamy kredytów.' in game_result %}danger{% elif 'REMIS' in game_result or 'Remis' in game_result %}warning{% else %}success{% endif %}">
                <h4>{{ game_result }}</h4>
            </div>
        {% endif %}

        <p class="mb-3">Twoje saldo: {{ user.balance }} PLN</p>

        <div class="card shadow-sm mb-4">
            <div class="card-body bg-dark">
                <form method="POST" id="game-form">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <div class="mb-3 text-start">
                        <label class="form-label fw-bold fs-3">Twoja wiadomość (np. 'zagraj w kości za 20 na nieparzyste'):</label>
                        <input type="text" name="user_input" class="form-control form-control-lg fs-2" id="user_input" required>
                    </div>
                    
                    <button type="submit" class="btn btn-lg btn-light w-100 mb-3 fs-2">Zatwierdź</button>

                    <div class="d-flex gap-2 justify-content-center flex-wrap">
                        <button type="button" onclick="insertText('Zagrajmy w blackjacka za 10')" class="btn btn-outline-light fs-3">Blackjack (10 PLN)</button>
                        <button type="button" onclick="insertText('Dobieram')" class="btn btn-outline-success fs-3">Dobierz kartę</button>
                        <button type="button" onclick="insertText('Pasuję')" class="btn btn-outline-danger fs-3">Pas</button>
                        <button type="button" onclick="insertText('Zagrajmy w kości za 10 na parzyste')" class="btn btn-outline-light fs-3">Kości (10 PLN)</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function insertText(text) {
    const input = document.getElementById('user_input');
    input.value = text;
}
</script>
{% endblock %}